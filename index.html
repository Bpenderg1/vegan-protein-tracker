<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;Simple Vegan Protein Tracker&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>:root {</p>
<p class="p1"><span class="Apple-converted-space">            </span>--primary: #4A9F46;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--secondary: #2D6A2E;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--light: #E8F5E4;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--dark: #1E441F;</p>
<p class="p1"><span class="Apple-converted-space">            </span>--accent: #F7B32B;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>* {</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f9f9f9;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #333;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.6;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>header {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 800px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0 auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.card {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 12px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 2px 10px rgba(0,0,0,0.05);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>h1, h2, h3 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: var(--dark);</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 15px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 5px 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>button:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--secondary);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>input, select, textarea {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid #ddd;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 16px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.analyzed-items {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 15px 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--light);</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.analyzed-items ul {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-left: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.ingredient-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: space-between;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 5px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.progress-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #ddd;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 10px 0 20px 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.progress-bar {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--primary);</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 12px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: width 0.3s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.progress-bar.warning {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f39c12;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.progress-bar.danger {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #e74c3c;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>#meal-history {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 20px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>#meals-list {</p>
<p class="p1"><span class="Apple-converted-space">            </span>list-style: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.meal-item {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--light);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 12px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 8px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-left: 4px solid var(--primary);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.meal-item h4 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0 0 5px 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: space-between;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.meal-item p {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 5px 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.meal-delete {</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #e74c3c;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.meal-buttons {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.meal-buttons button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 5px 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 12px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.meal-buttons .reuse-meal {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--accent);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.toast {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">            </span>bottom: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 50%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateX(-50%);</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: var(--accent);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 2px 10px rgba(0,0,0,0.2);</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 1000;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: none;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.just-eaten-checkbox {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 10px 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.just-eaten-checkbox input {</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-right: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.debug-panel {</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">            </span>bottom: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>right: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 300px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-height: 200px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow-y: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: rgba(0,0,0,0.8);</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #fff;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: monospace;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 12px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 1000;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.highlight {</p>
<p class="p1"><span class="Apple-converted-space">            </span>animation: highlight-animation 1s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes highlight-animation {</p>
<p class="p1"><span class="Apple-converted-space">            </span>0% { background-color: var(--accent); }</p>
<p class="p1"><span class="Apple-converted-space">            </span>100% { background-color: transparent; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.button-row {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.button-row button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex: 1;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.reset-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #888;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.manual-entry {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 15px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px dashed #ccc;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.manual-entry h4 {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.manual-entry-row {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 10px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.manual-entry-row input {</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.manual-entry-row button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 5px 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>@media (max-width: 576px) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>.container {</p>
<p class="p1"><span class="Apple-converted-space">                </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>.ingredient-item {</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>.manual-entry-row {</p>
<p class="p1"><span class="Apple-converted-space">                </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">                </span>gap: 5px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>#debug-info {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f8f9fa;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 1px solid #ddd;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-top: 10px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: monospace;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-size: 12px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-height: 300px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow-y: auto;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;header&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1&gt;Simple Vegan Protein Tracker&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/header&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2&gt;Protein Calculator&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p&gt;Enter your weight to calculate your recommended protein intake:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="weight"&gt;Weight (kg):&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="number" id="weight" placeholder="Enter weight in kg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="activity"&gt;Activity Level:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;select id="activity"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="1.0"&gt;Light Activity&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="1.1" selected&gt;Moderate Activity&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="1.2"&gt;Heavy Activity&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="1.4"&gt;Athlete&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="calculateProtein()"&gt;Calculate&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="results" style="margin-top: 15px; display: none;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;Your daily protein goal: &lt;span id="daily-goal"&gt;0&lt;/span&gt;g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;Weekly goal: &lt;span id="weekly-goal"&gt;0&lt;/span&gt;g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2&gt;Analyze Meal Protein&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p&gt;Describe your meal and we'll estimate the protein content:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="meal-name"&gt;Meal Name:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="meal-name" placeholder="Breakfast, Lunch, Dinner, Snack, etc."&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label for="meal-date"&gt;Date:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="date" id="meal-date"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;textarea id="meal-description" rows="4" placeholder="E.g., 1 cup tofu, 1/2 cup chickpeas, 2 tbsp flax seeds"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button onclick="analyzeProtein()"&gt;Analyze Protein&lt;/button&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="manual-entry"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h4&gt;Manual Food Entry&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;Can't find a food? Add it manually:&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="manual-entry-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="text" id="manual-food-name" placeholder="Food name (e.g., Lentil Soup)"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="number" id="manual-food-protein" placeholder="Protein (g)"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button onclick="addManualFood()"&gt;Add Food&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="analyzed-items" class="analyzed-items" style="display: none;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h3&gt;Identified Ingredients:&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;ul id="ingredient-list"&gt;&lt;/ul&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;Estimated total protein: &lt;span id="estimated-protein"&gt;0&lt;/span&gt;g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="just-eaten-checkbox"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="checkbox" id="just-eaten" checked&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;label for="just-eaten"&gt;I just ate this (count toward today's protein)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="button-row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button onclick="saveMeal()"&gt;Save Meal&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button onclick="resetMealForm()" class="reset-button"&gt;Reset&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2&gt;Protein Tracking&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="tracking-summary"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h3&gt;Today's Progress&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;Daily Goal: &lt;span id="tracking-daily-goal"&gt;0&lt;/span&gt;g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;Consumed Today: &lt;span id="consumed-today"&gt;0&lt;/span&gt;g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="progress-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="daily-progress" class="progress-bar" style="width: 0%;"&gt;0%&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h3&gt;Weekly Progress&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;Weekly Goal: &lt;span id="tracking-weekly-goal"&gt;0&lt;/span&gt;g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;Consumed This Week: &lt;span id="consumed-week"&gt;0&lt;/span&gt;g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="progress-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div id="weekly-progress" class="progress-bar" style="width: 0%;"&gt;0%&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3&gt;Saved Meals&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div id="meal-history"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p id="no-meals" style="display: block;"&gt;No saved meals yet.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;ul id="meals-list"&gt;&lt;/ul&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button onclick="clearMeals()" style="background-color: #e74c3c;"&gt;Clear All Meals&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="toast" class="toast"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="debug-output" class="debug-panel" style="display: none;"&gt;&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Vegan food database with protein content per 100g</p>
<p class="p1"><span class="Apple-converted-space">        </span>const veganFoods = [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Tofu", protein: 10, synonyms: ["firm tofu", "silken tofu", "extra firm tofu", "soft tofu"] }, // Adjusted from 15g to 10g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Tempeh", protein: 19 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Seitan", protein: 75, synonyms: ["wheat gluten", "vital wheat gluten"] }, // Adjusted from 25g to 75g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Lentils", protein: 9, synonyms: ["red lentils", "green lentils", "brown lentils"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Chickpeas", protein: 8.9, synonyms: ["garbanzo", "garbanzo beans"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Black beans", protein: 8.7 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Kidney beans", protein: 8.7 }, // Added</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Pinto beans", protein: 8.2 }, // Added</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Edamame", protein: 11, synonyms: ["soybeans", "green soybeans"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Quinoa", protein: 4.4 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Peanut butter", protein: 24, synonyms: ["pb"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Almonds", protein: 21 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Almond butter", protein: 21 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Walnuts", protein: 15 }, // Added</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Nutritional yeast", protein: 45, synonyms: ["nooch"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Soy milk", protein: 3.3, synonyms: ["soymilk", "soya milk"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Hemp milk", protein: 1, synonyms: ["hemp beverage"] }, // Adjusted from 1.8g to 1g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Almond milk", protein: 0.5, synonyms: ["almond beverage"] }, // Added</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Oat milk", protein: 0.7, synonyms: ["oat beverage"] }, // Added</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Hemp seeds", protein: 31, synonyms: ["hemp hearts"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Chia seeds", protein: 17 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Pumpkin seeds", protein: 30, synonyms: ["pepitas"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Spirulina", protein: 57, synonyms: ["blue-green algae"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Oats", protein: 13, synonyms: ["rolled oats", "old-fashioned oats", "steel cut oats"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Pea protein", protein: 80 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Broccoli", protein: 2.8, synonyms: ["brocolli", "brocoli"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Spinach", protein: 2.9 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Kale", protein: 3.3 }, // Added</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Protein pasta", protein: 25 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Beyond Burger", protein: 20 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Impossible Burger", protein: 19 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Protein shake", protein: 20 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Soy yogurt", protein: 4 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Coconut yogurt", protein: 1.5 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Flax seeds", protein: 18, synonyms: ["flaxseeds", "flaxseed", "flax"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Wheat germ", protein: 23 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Moringa powder", protein: 25, synonyms: ["moringa", "moringa leaf"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Psyllium husk", protein: 0.5, synonyms: ["psylium husk", "psyllium powder", "psylium powder"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Cacao powder", protein: 20, synonyms: ["cocao powder", "cocoa powder", "cacao", "cocao", "cocoa"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Collard greens", protein: 2.5 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Parsley", protein: 2.2 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Banana", protein: 1.1 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Apple", protein: 0.3 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Blueberries", protein: 0.7 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Strawberries", protein: 0.7 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Common prepared foods with protein content per serving</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Lentil soup", protein: 10, servingSize: "1 bowl (200ml)" }, // Adjusted</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Vegetable soup", protein: 4, servingSize: "1 bowl (200ml)" }, // Adjusted from 5g to 4g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Split pea soup", protein: 10, servingSize: "1 bowl (200ml)" },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Bean soup", protein: 8, servingSize: "1 bowl (200ml)" },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Hummus", protein: 4, servingSize: "1/4 cup" }, // Adjusted from 8g to 4g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Falafel", protein: 3, servingSize: "1 piece" }, // Adjusted from 7g to 3g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Tofu scramble", protein: 12, servingSize: "1 cup" }, // Adjusted from 14g to 12g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Veggie burger", protein: 12, servingSize: "1 patty" }, // Adjusted from 15g to 12g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Bread", protein: 4, servingSize: "1 slice", synonyms: ["whole grain bread", "sourdough", "wheat bread"] },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Bagel", protein: 9, servingSize: "1 bagel" },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Granola", protein: 6, servingSize: "1/2 cup" },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Vegan yogurt", protein: 4, servingSize: "1 cup" }, // Adjusted from 5g to 4g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Salad", protein: 2, servingSize: "1 bowl", synonyms: ["garden salad", "green salad"] }, // Adjusted from 3g to 2g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Stir fry", protein: 10, servingSize: "1 cup" }, // Adjusted from 12g to 10g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ name: "Pasta with tomato sauce", protein: 7, servingSize: "1 cup" }<span class="Apple-converted-space">  </span>// Adjusted from 8g to 7g</p>
<p class="p1"><span class="Apple-converted-space">        </span>];</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Reference measures for descriptive text parsing</p>
<p class="p1"><span class="Apple-converted-space">        </span>const measurementReferences = [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["cup", "cups", "c."], grams: 240 }, // Fixed: 1 cup = 16 tbsp = 240g</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["tbsp", "tbs", "tablespoon", "tablespoons", "tb", "tbl"], grams: 15 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["tsp", "teaspoon", "teaspoons", "ts", "t"], grams: 5 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["gram", "grams", "g"], grams: 1 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["ounce", "ounces", "oz"], grams: 28 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["pound", "pounds", "lb", "lbs"], grams: 454 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["handful", "hand"], grams: 30 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["slice", "slices"], grams: 20 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["stalk", "stalks"], grams: 40 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["floret", "florets"], grams: 10 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["bowl", "bowls"], grams: 250 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["piece", "pieces"], grams: 30 },</p>
<p class="p1"><span class="Apple-converted-space">            </span>{ terms: ["patty", "patties"], grams: 100 }</p>
<p class="p1"><span class="Apple-converted-space">        </span>];</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// In-memory storage as fallback for localStorage</p>
<p class="p1"><span class="Apple-converted-space">        </span>const memoryStorage = {</p>
<p class="p1"><span class="Apple-converted-space">            </span>goals: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>daily: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>weekly: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>weight: 0,</p>
<p class="p1"><span class="Apple-converted-space">                </span>activity: 1.1</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>meals: []</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Global variables to store analyzed meal</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentMealProtein = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentMealItems = [];</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Helper function to show toast messages</p>
<p class="p1"><span class="Apple-converted-space">        </span>function showToast(message) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const toast = document.getElementById('toast');</p>
<p class="p1"><span class="Apple-converted-space">            </span>toast.textContent = message;</p>
<p class="p1"><span class="Apple-converted-space">            </span>toast.style.display = 'block';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>setTimeout(function() {</p>
<p class="p1"><span class="Apple-converted-space">                </span>toast.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}, 3000);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Debug helper</p>
<p class="p1"><span class="Apple-converted-space">        </span>function debug(message) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>console.log(message);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const debugPanel = document.getElementById('debug-output');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const p = document.createElement('p');</p>
<p class="p1"><span class="Apple-converted-space">            </span>p.textContent = message;</p>
<p class="p1"><span class="Apple-converted-space">            </span>debugPanel.appendChild(p);</p>
<p class="p1"><span class="Apple-converted-space">            </span>debugPanel.style.display = 'block';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Auto-scroll to bottom</p>
<p class="p1"><span class="Apple-converted-space">            </span>debugPanel.scrollTop = debugPanel.scrollHeight;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Safe localStorage wrapper</p>
<p class="p1"><span class="Apple-converted-space">        </span>function safeStorage() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const testKey = '__test__';</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>localStorage.setItem(testKey, testKey);</p>
<p class="p1"><span class="Apple-converted-space">                </span>localStorage.removeItem(testKey);</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("localStorage is available!");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>get: function(key) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return localStorage.getItem(key);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>debug(`Error getting ${key} from localStorage: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return null;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>set: function(key, value) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>localStorage.setItem(key, value);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>debug(`Error setting ${key} in localStorage: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return false;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>remove: function(key) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>localStorage.removeItem(key);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>debug(`Error removing ${key} from localStorage: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return false;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("localStorage is NOT available! Using memory storage fallback.");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>get: function(key) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (key === 'protein-goals') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return JSON.stringify(memoryStorage.goals);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (key === 'protein-meals') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>return JSON.stringify(memoryStorage.meals);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return null;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>set: function(key, value) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (key === 'protein-goals') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>memoryStorage.goals = JSON.parse(value);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (key === 'protein-meals') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>memoryStorage.meals = JSON.parse(value);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>},</p>
<p class="p1"><span class="Apple-converted-space">                    </span>remove: function(key) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (key === 'protein-goals') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>memoryStorage.goals = {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>daily: 0,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>weekly: 0,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>weight: 0,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>activity: 1.1</p>
<p class="p1"><span class="Apple-converted-space">                            </span>};</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (key === 'protein-meals') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>memoryStorage.meals = [];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Initialize storage helper</p>
<p class="p1"><span class="Apple-converted-space">        </span>const storage = safeStorage();</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Reset meal form</p>
<p class="p1"><span class="Apple-converted-space">        </span>function resetMealForm() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug("Resetting meal form");</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('meal-name').value = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('meal-description').value = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('analyzed-items').style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentMealProtein = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentMealItems = [];</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Remove debug info if it exists</p>
<p class="p1"><span class="Apple-converted-space">            </span>const debugInfo = document.getElementById('debug-info');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (debugInfo) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debugInfo.remove();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>showToast('Form reset');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Function to get current date in YYYY-MM-DD format</p>
<p class="p1"><span class="Apple-converted-space">        </span>function getCurrentDate() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const now = new Date();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const year = now.getFullYear();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const month = String(now.getMonth() + 1).padStart(2, '0');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const day = String(now.getDate()).padStart(2, '0');</p>
<p class="p1"><span class="Apple-converted-space">            </span>return `${year}-${month}-${day}`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Add a food manually</p>
<p class="p1"><span class="Apple-converted-space">        </span>function addManualFood() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const foodName = document.getElementById('manual-food-name').value.trim();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const proteinAmount = parseFloat(document.getElementById('manual-food-protein').value);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!foodName) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('Please enter a food name');</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (isNaN(proteinAmount) || proteinAmount &lt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('Please enter a valid protein amount');</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Adding manual food: ${foodName} with ${proteinAmount}g protein`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Create an item for the manually added food</p>
<p class="p1"><span class="Apple-converted-space">            </span>const manualItem = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>food: foodName,</p>
<p class="p1"><span class="Apple-converted-space">                </span>serving: "1 serving (custom)",</p>
<p class="p1"><span class="Apple-converted-space">                </span>protein: proteinAmount,</p>
<p class="p1"><span class="Apple-converted-space">                </span>originalText: `${foodName} (manually added)`</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update globals</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentMealItems.push(manualItem);</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentMealProtein += proteinAmount;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update display</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateAnalysisDisplay();</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Clear manual entry form</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('manual-food-name').value = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('manual-food-protein').value = '';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>showToast(`Added ${foodName} with ${proteinAmount}g protein`);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Update analysis display with current items</p>
<p class="p1"><span class="Apple-converted-space">        </span>function updateAnalysisDisplay() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const ingredientList = document.getElementById('ingredient-list');</p>
<p class="p1"><span class="Apple-converted-space">            </span>ingredientList.innerHTML = '';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (currentMealItems.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('analyzed-items').style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; currentMealItems.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const item = currentMealItems[i];</p>
<p class="p1"><span class="Apple-converted-space">                </span>const li = document.createElement('li');</p>
<p class="p1"><span class="Apple-converted-space">                </span>li.className = 'ingredient-item';</p>
<p class="p1"><span class="Apple-converted-space">                </span>li.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div&gt;&lt;strong&gt;${item.food}&lt;/strong&gt; (${item.serving})&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div&gt;${item.protein}g protein&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div style="font-size: 0.8em; color: #666; overflow: hidden; text-overflow: ellipsis; max-width: 100%;"&gt;"${item.originalText}"&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>ingredientList.appendChild(li);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('estimated-protein').textContent = currentMealProtein.toFixed(1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('analyzed-items').style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Set today's date as default for the meal date input</p>
<p class="p1"><span class="Apple-converted-space">        </span>window.onload = function() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Enable debug mode</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug("App started. Initializing...");</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const todayStr = getCurrentDate();</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('meal-date').value = todayStr;</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Set default date: ${todayStr}`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Load saved data</p>
<p class="p1"><span class="Apple-converted-space">            </span>loadSavedData();</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Calculate protein based on weight and activity level</p>
<p class="p1"><span class="Apple-converted-space">        </span>function calculateProtein() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const weight = parseFloat(document.getElementById('weight').value);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const activity = parseFloat(document.getElementById('activity').value);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (isNaN(weight) || weight &lt;= 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('Please enter a valid weight');</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Invalid weight: ${weight}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const dailyProtein = Math.round(weight * activity);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const weeklyProtein = dailyProtein * 7;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Calculated goals: ${dailyProtein}g daily, ${weeklyProtein}g weekly`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('daily-goal').textContent = dailyProtein;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('weekly-goal').textContent = weeklyProtein;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('results').style.display = 'block';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update tracking section</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('tracking-daily-goal').textContent = dailyProtein;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('tracking-weekly-goal').textContent = weeklyProtein;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Save goals</p>
<p class="p1"><span class="Apple-converted-space">            </span>const goals = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>daily: dailyProtein,</p>
<p class="p1"><span class="Apple-converted-space">                </span>weekly: weeklyProtein,</p>
<p class="p1"><span class="Apple-converted-space">                </span>weight: weight,</p>
<p class="p1"><span class="Apple-converted-space">                </span>activity: activity</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>storage.set('protein-goals', JSON.stringify(goals));</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug("Goals saved to storage");</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>updateProgressBars();</p>
<p class="p1"><span class="Apple-converted-space">            </span>showToast('Protein goals calculated and saved!');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Load saved data (goals and meals)</p>
<p class="p1"><span class="Apple-converted-space">        </span>function loadSavedData() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// Load goals</p>
<p class="p1"><span class="Apple-converted-space">            </span>const savedGoals = storage.get('protein-goals');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (savedGoals) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const goals = JSON.parse(savedGoals);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Loaded goals: ${goals.daily}g daily, ${goals.weekly}g weekly`);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>document.getElementById('weight').value = goals.weight || '';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>document.getElementById('activity').value = goals.activity || '1.1';</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (goals.daily &amp;&amp; goals.weekly) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>document.getElementById('daily-goal').textContent = goals.daily;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>document.getElementById('weekly-goal').textContent = goals.weekly;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>document.getElementById('results').style.display = 'block';</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>document.getElementById('tracking-daily-goal').textContent = goals.daily;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>document.getElementById('tracking-weekly-goal').textContent = goals.weekly;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Error parsing saved goals: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("No saved goals found");</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Load meals</p>
<p class="p1"><span class="Apple-converted-space">            </span>loadMeals();</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateProgressBars();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Save a meal</p>
<p class="p1"><span class="Apple-converted-space">        </span>function saveMeal() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (currentMealProtein &lt;= 0 || currentMealItems.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('Please analyze a meal first');</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("Attempted to save meal without analysis");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const mealName = document.getElementById('meal-name').value.trim() || 'Untitled Meal';</p>
<p class="p1"><span class="Apple-converted-space">            </span>const mealDate = document.getElementById('meal-date').value;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!mealDate) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('Please select a date for the meal');</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("Attempted to save meal without date");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Create meal object</p>
<p class="p1"><span class="Apple-converted-space">            </span>const meal = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>id: Date.now(), // unique ID based on timestamp</p>
<p class="p1"><span class="Apple-converted-space">                </span>name: mealName,</p>
<p class="p1"><span class="Apple-converted-space">                </span>date: mealDate,</p>
<p class="p1"><span class="Apple-converted-space">                </span>protein: parseFloat(currentMealProtein),</p>
<p class="p1"><span class="Apple-converted-space">                </span>items: currentMealItems,</p>
<p class="p1"><span class="Apple-converted-space">                </span>description: document.getElementById('meal-description').value.trim()</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Creating new meal: ${mealName}, ${meal.protein}g protein, date: ${mealDate}`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get saved meals or initialize empty array</p>
<p class="p1"><span class="Apple-converted-space">            </span>let meals = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>const savedMeals = storage.get('protein-meals');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (savedMeals) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>meals = JSON.parse(savedMeals);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Loaded ${meals.length} existing meals`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Error parsing saved meals: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("No existing meals found");</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Add new meal</p>
<p class="p1"><span class="Apple-converted-space">            </span>meals.push(meal);</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Added meal to array. New total: ${meals.length} meals`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Save back to storage</p>
<p class="p1"><span class="Apple-converted-space">            </span>const saveSuccess = storage.set('protein-meals', JSON.stringify(meals));</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Save to storage ${saveSuccess ? 'successful' : 'failed'}`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update UI immediately with direct meal data (bypass storage)</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateUIWithNewMeal(meal, false); // Don't update progress if "just eaten" is not checked</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Reset meal form</p>
<p class="p1"><span class="Apple-converted-space">            </span>resetMealForm();</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>showToast('Meal saved successfully!');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Update UI directly with new meal data (bypassing storage)</p>
<p class="p1"><span class="Apple-converted-space">        </span>function updateUIWithNewMeal(meal, updateProgress = true) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug("Updating UI with new meal data directly");</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update meal list</p>
<p class="p1"><span class="Apple-converted-space">            </span>const mealsList = document.getElementById('meals-list');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const noMealsMsg = document.getElementById('no-meals');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Hide the "no meals" message</p>
<p class="p1"><span class="Apple-converted-space">            </span>noMealsMsg.style.display = 'none';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Create a new list item for the meal</p>
<p class="p1"><span class="Apple-converted-space">            </span>const li = document.createElement('li');</p>
<p class="p1"><span class="Apple-converted-space">            </span>li.className = 'meal-item';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>li.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>${meal.name}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="meal-delete" onclick="deleteMeal(${meal.id})"&gt;&amp;times;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;&lt;strong&gt;Date:&lt;/strong&gt; ${formatDate(meal.date)}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;&lt;strong&gt;Protein:&lt;/strong&gt; ${meal.protein.toFixed(1)}g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p&gt;&lt;small&gt;${meal.items ? meal.items.length : 0} ingredients&lt;/small&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="meal-buttons"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button class="reuse-meal" onclick="reuseMeal(${meal.id})"&gt;Use this meal&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Add to the beginning of the list</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (mealsList.firstChild) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>mealsList.insertBefore(li, mealsList.firstChild);</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>mealsList.appendChild(li);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Only update progress bars if updateProgress is true</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (updateProgress) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>updateProgressWithMeal(meal);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Update progress bars with a new meal</p>
<p class="p1"><span class="Apple-converted-space">        </span>function updateProgressWithMeal(meal) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug("Updating progress with meal");</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get today's date for comparison</p>
<p class="p1"><span class="Apple-converted-space">            </span>const todayStr = getCurrentDate();</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Today's date: ${todayStr}, Meal date: ${meal.date}`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Check if the meal is from today</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (meal.date === todayStr) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Meal is from today! Adding ${meal.protein}g to today's total`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Update today's consumed</p>
<p class="p1"><span class="Apple-converted-space">                </span>const consumedTodayElement = document.getElementById('consumed-today');</p>
<p class="p1"><span class="Apple-converted-space">                </span>const currentConsumed = parseFloat(consumedTodayElement.textContent) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const newTotal = currentConsumed + parseFloat(meal.protein);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Updating consumed today from ${currentConsumed}g to ${newTotal}g`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>consumedTodayElement.textContent = newTotal.toFixed(1);</p>
<p class="p1"><span class="Apple-converted-space">                </span>consumedTodayElement.classList.add('highlight');</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Update progress bar</p>
<p class="p1"><span class="Apple-converted-space">                </span>const dailyGoal = parseFloat(document.getElementById('tracking-daily-goal').textContent) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (dailyGoal &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const percentage = Math.min(Math.round((newTotal / dailyGoal) * 100), 100);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const progressBar = document.getElementById('daily-progress');</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>progressBar.style.width = `${percentage}%`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>progressBar.textContent = `${percentage}%`;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Update class</p>
<p class="p1"><span class="Apple-converted-space">                    </span>progressBar.className = 'progress-bar';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (percentage &lt; 40) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>progressBar.classList.add('danger');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else if (percentage &lt; 70) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>progressBar.classList.add('warning');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Updated daily progress to ${percentage}%`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get start of week date for comparison</p>
<p class="p1"><span class="Apple-converted-space">            </span>const now = new Date();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const startOfWeek = new Date(now);</p>
<p class="p1"><span class="Apple-converted-space">            </span>startOfWeek.setDate(now.getDate() - now.getDay()); // Go back to Sunday</p>
<p class="p1"><span class="Apple-converted-space">            </span>const startOfWeekStr = startOfWeek.toISOString().split('T')[0];</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Check if meal is from this week</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (meal.date &gt;= startOfWeekStr) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// Update weekly consumed</p>
<p class="p1"><span class="Apple-converted-space">                </span>const consumedWeekElement = document.getElementById('consumed-week');</p>
<p class="p1"><span class="Apple-converted-space">                </span>const currentWeekConsumed = parseFloat(consumedWeekElement.textContent) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const newWeekTotal = currentWeekConsumed + parseFloat(meal.protein);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Updating consumed this week to ${newWeekTotal}g`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>consumedWeekElement.textContent = newWeekTotal.toFixed(1);</p>
<p class="p1"><span class="Apple-converted-space">                </span>consumedWeekElement.classList.add('highlight');</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Update weekly progress</p>
<p class="p1"><span class="Apple-converted-space">                </span>const weeklyGoal = parseFloat(document.getElementById('tracking-weekly-goal').textContent) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (weeklyGoal &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const weekPercentage = Math.min(Math.round((newWeekTotal / weeklyGoal) * 100), 100);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const weekProgressBar = document.getElementById('weekly-progress');</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>weekProgressBar.style.width = `${weekPercentage}%`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>weekProgressBar.textContent = `${weekPercentage}%`;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Update class</p>
<p class="p1"><span class="Apple-converted-space">                    </span>weekProgressBar.className = 'progress-bar';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (weekPercentage &lt; 40) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>weekProgressBar.classList.add('danger');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else if (weekPercentage &lt; 70) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>weekProgressBar.classList.add('warning');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Updated weekly progress to ${weekPercentage}%`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Reuse a saved meal</p>
<p class="p1"><span class="Apple-converted-space">        </span>function reuseMeal(mealId) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Reusing meal with ID: ${mealId}`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// First reset the current form</p>
<p class="p1"><span class="Apple-converted-space">            </span>resetMealForm();</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get saved meals</p>
<p class="p1"><span class="Apple-converted-space">            </span>const savedMeals = storage.get('protein-meals');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!savedMeals) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("No saved meals found");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const meals = JSON.parse(savedMeals);</p>
<p class="p1"><span class="Apple-converted-space">                </span>const meal = meals.find(m =&gt; m.id === mealId);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!meal) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Meal with ID ${mealId} not found`);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Found meal: ${meal.name}, ${meal.description}`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Fill in the form with the saved meal data</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('meal-name').value = meal.name;</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('meal-description').value = meal.description;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Set today's date</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('meal-date').value = getCurrentDate();</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Set global variables directly instead of re-analyzing</p>
<p class="p1"><span class="Apple-converted-space">                </span>currentMealItems = [...meal.items]; // Clone to avoid reference issues</p>
<p class="p1"><span class="Apple-converted-space">                </span>currentMealProtein = parseFloat(meal.protein);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Update display</p>
<p class="p1"><span class="Apple-converted-space">                </span>updateAnalysisDisplay();</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast(`Loaded "${meal.name}" for re-use`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Error reusing meal: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Load and display saved meals</p>
<p class="p1"><span class="Apple-converted-space">        </span>function loadMeals() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const mealsList = document.getElementById('meals-list');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const noMealsMsg = document.getElementById('no-meals');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Clear current list</p>
<p class="p1"><span class="Apple-converted-space">            </span>mealsList.innerHTML = '';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get saved meals</p>
<p class="p1"><span class="Apple-converted-space">            </span>const savedMeals = storage.get('protein-meals');</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug("Loading meals from storage");</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!savedMeals) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("No saved meals found in storage");</p>
<p class="p1"><span class="Apple-converted-space">                </span>noMealsMsg.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>let meals = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>meals = JSON.parse(savedMeals);</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Found ${meals.length} saved meals in storage`);</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Error parsing saved meals: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>noMealsMsg.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!meals || meals.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("Meals array is empty");</p>
<p class="p1"><span class="Apple-converted-space">                </span>noMealsMsg.style.display = 'block';</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>noMealsMsg.style.display = 'none';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Sort meals by date (newest first)</p>
<p class="p1"><span class="Apple-converted-space">            </span>meals.sort((a, b) =&gt; new Date(b.date) - new Date(a.date));</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Add meals to list</p>
<p class="p1"><span class="Apple-converted-space">            </span>meals.forEach(meal =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Adding meal to list: ${meal.name}, ${meal.protein}g protein`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const li = document.createElement('li');</p>
<p class="p1"><span class="Apple-converted-space">                </span>li.className = 'meal-item';</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Ensure protein value is valid</p>
<p class="p1"><span class="Apple-converted-space">                </span>const proteinValue = parseFloat(meal.protein) || 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>const itemsLength = meal.items ? meal.items.length : 0;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>li.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${meal.name}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span class="meal-delete" onclick="deleteMeal(${meal.id})"&gt;&amp;times;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p&gt;&lt;strong&gt;Date:&lt;/strong&gt; ${formatDate(meal.date)}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p&gt;&lt;strong&gt;Protein:&lt;/strong&gt; ${proteinValue.toFixed(1)}g&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p&gt;&lt;small&gt;${itemsLength} ingredients&lt;/small&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="meal-buttons"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button class="reuse-meal" onclick="reuseMeal(${meal.id})"&gt;Use this meal&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>mealsList.appendChild(li);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Format date for display</p>
<p class="p1"><span class="Apple-converted-space">        </span>function formatDate(dateString) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const options = { year: 'numeric', month: 'short', day: 'numeric' };</p>
<p class="p1"><span class="Apple-converted-space">            </span>return new Date(dateString).toLocaleDateString(undefined, options);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Delete a meal</p>
<p class="p1"><span class="Apple-converted-space">        </span>function deleteMeal(id) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (confirm('Are you sure you want to delete this meal?')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Deleting meal with ID: ${id}`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>const savedMeals = storage.get('protein-meals');</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (savedMeals) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>let meals = JSON.parse(savedMeals);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const originalCount = meals.length;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>meals = meals.filter(meal =&gt; meal.id !== id);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>debug(`Filtered meals: removed ${originalCount - meals.length} meal(s)`);</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>storage.set('protein-meals', JSON.stringify(meals));</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>// Update UI</p>
<p class="p1"><span class="Apple-converted-space">                        </span>loadMeals();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateProgressBars();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>showToast('Meal deleted');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>debug(`Error deleting meal: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>showToast('Error deleting meal');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Clear all meals</p>
<p class="p1"><span class="Apple-converted-space">        </span>function clearMeals() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (confirm('Are you sure you want to delete ALL saved meals? This cannot be undone.')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("Clearing all meals");</p>
<p class="p1"><span class="Apple-converted-space">                </span>storage.remove('protein-meals');</p>
<p class="p1"><span class="Apple-converted-space">                </span>loadMeals();</p>
<p class="p1"><span class="Apple-converted-space">                </span>updateProgressBars();</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('All meals cleared');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Update progress bars</p>
<p class="p1"><span class="Apple-converted-space">        </span>function updateProgressBars() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const dailyGoal = parseInt(document.getElementById('tracking-daily-goal').textContent) || 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const weeklyGoal = parseInt(document.getElementById('tracking-weekly-goal').textContent) || 0;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (dailyGoal === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("No goals set, skipping progress update");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return; // No goals set</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get saved meals</p>
<p class="p1"><span class="Apple-converted-space">            </span>const savedMeals = storage.get('protein-meals');</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!savedMeals) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("No saved meals found for progress update");</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('consumed-today').textContent = '0';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('consumed-week').textContent = '0';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('daily-progress').style.width = '0%';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('daily-progress').textContent = '0%';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('weekly-progress').style.width = '0%';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('weekly-progress').textContent = '0%';</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>let meals = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>try {</p>
<p class="p1"><span class="Apple-converted-space">                </span>meals = JSON.parse(savedMeals);</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Loaded ${meals.length} meals for progress update`);</p>
<p class="p1"><span class="Apple-converted-space">            </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Error parsing saved meals in updateProgressBars: ${e.message}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (meals.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("Meals array is empty in progress update");</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('consumed-today').textContent = '0';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('consumed-week').textContent = '0';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('daily-progress').style.width = '0%';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('daily-progress').textContent = '0%';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('weekly-progress').style.width = '0%';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('weekly-progress').textContent = '0%';</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get today's date in YYYY-MM-DD format</p>
<p class="p1"><span class="Apple-converted-space">            </span>const todayStr = getCurrentDate();</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Today's date (for progress comparison): ${todayStr}`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Get start of week (Sunday) in YYYY-MM-DD format</p>
<p class="p1"><span class="Apple-converted-space">            </span>const now = new Date();</p>
<p class="p1"><span class="Apple-converted-space">            </span>const startOfWeek = new Date(now);</p>
<p class="p1"><span class="Apple-converted-space">            </span>startOfWeek.setDate(now.getDate() - now.getDay()); // Go back to Sunday</p>
<p class="p1"><span class="Apple-converted-space">            </span>const startOfWeekStr = startOfWeek.toISOString().split('T')[0];</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Start of week: ${startOfWeekStr}`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Calculate totals</p>
<p class="p1"><span class="Apple-converted-space">            </span>let todayTotal = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let weekTotal = 0;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>meals.forEach(meal =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Checking meal date: ${meal.date}, protein: ${meal.protein}`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Compare the exact string formats to ensure proper matching</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (meal.date === todayStr) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Match for today: adding ${meal.protein}g protein`);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>todayTotal += parseFloat(meal.protein || 0);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (meal.date &gt;= startOfWeekStr) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Match for this week: adding ${meal.protein}g protein`);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>weekTotal += parseFloat(meal.protein || 0);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Calculated totals - Today: ${todayTotal}g, Week: ${weekTotal}g`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update display with visual feedback</p>
<p class="p1"><span class="Apple-converted-space">            </span>const consumedTodayElement = document.getElementById('consumed-today');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const consumedWeekElement = document.getElementById('consumed-week');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>consumedTodayElement.textContent = todayTotal.toFixed(1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>consumedWeekElement.textContent = weekTotal.toFixed(1);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Calculate percentages</p>
<p class="p1"><span class="Apple-converted-space">            </span>const dailyPercentage = Math.min(Math.round((todayTotal / dailyGoal) * 100), 100);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const weeklyPercentage = Math.min(Math.round((weekTotal / weeklyGoal) * 100), 100);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Progress percentages - Daily: ${dailyPercentage}%, Weekly: ${weeklyPercentage}%`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update progress bars</p>
<p class="p1"><span class="Apple-converted-space">            </span>const dailyProgressBar = document.getElementById('daily-progress');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const weeklyProgressBar = document.getElementById('weekly-progress');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>dailyProgressBar.style.width = `${dailyPercentage}%`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>dailyProgressBar.textContent = `${dailyPercentage}%`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>weeklyProgressBar.style.width = `${weeklyPercentage}%`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>weeklyProgressBar.textContent = `${weeklyPercentage}%`;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Add color classes</p>
<p class="p1"><span class="Apple-converted-space">            </span>dailyProgressBar.className = 'progress-bar';</p>
<p class="p1"><span class="Apple-converted-space">            </span>weeklyProgressBar.className = 'progress-bar';</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (dailyPercentage &lt; 40) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>dailyProgressBar.classList.add('danger');</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else if (dailyPercentage &lt; 70) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>dailyProgressBar.classList.add('warning');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (weeklyPercentage &lt; 40) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>weeklyProgressBar.classList.add('danger');</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else if (weeklyPercentage &lt; 70) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>weeklyProgressBar.classList.add('warning');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Analyze a meal description and estimate protein content</p>
<p class="p1"><span class="Apple-converted-space">        </span>function analyzeProtein() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const description = document.getElementById('meal-description').value.trim();</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (!description) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('Please enter a meal description');</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("Empty meal description");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Analyzing meal: "${description}"`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Reset any previous analysis</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentMealItems = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentMealProtein = 0;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Split input by commas first - BEFORE normalizing text</p>
<p class="p1"><span class="Apple-converted-space">            </span>const inputChunks = description.split(',').map(chunk =&gt; chunk.trim());</p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Split into ${inputChunks.length} chunks`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Debug info container</p>
<p class="p1"><span class="Apple-converted-space">            </span>const debugInfo = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">            </span>debugInfo.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">            </span>debugInfo.id = 'debug-info';</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.body.appendChild(debugInfo);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const results = [];</p>
<p class="p1"><span class="Apple-converted-space">            </span>let totalProtein = 0;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// First check for complete meals (like "lentil soup" or "1 bowl of lentil soup")</p>
<p class="p1"><span class="Apple-converted-space">            </span>const completeMealRegex = /(\d*\.?\d*)\s*(bowls?|cups?|servings?)?(?:\s+of)?\s+([a-zA-Z\s]+)/i;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; inputChunks.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const originalChunk = inputChunks[i];</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!originalChunk) continue;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Normalize chunk text</p>
<p class="p1"><span class="Apple-converted-space">                </span>const chunk = originalChunk.toLowerCase()</p>
<p class="p1"><span class="Apple-converted-space">                    </span>.replace(/[.;:!?()]/g, ' ')</p>
<p class="p1"><span class="Apple-converted-space">                    </span>.replace(/\s+/g, ' ')</p>
<p class="p1"><span class="Apple-converted-space">                    </span>.trim();</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>debug(`Analyzing chunk: "${chunk}"`);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Debug info for this chunk</p>
<p class="p1"><span class="Apple-converted-space">                </span>const chunkInfo = document.createElement('p');</p>
<p class="p1"><span class="Apple-converted-space">                </span>chunkInfo.textContent = `Analyzing: "${chunk}"`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>debugInfo.appendChild(chunkInfo);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Look for complete meals first (like "lentil soup" or "bowl of lentil soup")</p>
<p class="p1"><span class="Apple-converted-space">                </span>let completeMealMatch = null;</p>
<p class="p1"><span class="Apple-converted-space">                </span>let completeMealFood = null;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Check for complete prepared foods</p>
<p class="p1"><span class="Apple-converted-space">                </span>for (const food of veganFoods) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (food.servingSize) { // This indicates it's a prepared food</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const foodName = food.name.toLowerCase();</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>// Check if the chunk contains this prepared food</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (chunk.includes(foodName)) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>// We found a prepared food match! Now figure out quantity</p>
<p class="p1"><span class="Apple-converted-space">                            </span>let quantity = 1; // Default to 1 serving</p>
<p class="p2"><span class="Apple-converted-space">                            </span></p>
<p class="p1"><span class="Apple-converted-space">                            </span>// Try to extract quantity</p>
<p class="p1"><span class="Apple-converted-space">                            </span>const match = chunk.match(completeMealRegex);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>if (match &amp;&amp; match[3].includes(foodName)) {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>if (match[1] &amp;&amp; !isNaN(parseFloat(match[1]))) {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>quantity = parseFloat(match[1]);</p>
<p class="p1"><span class="Apple-converted-space">                                </span>} else if (chunk.includes('half')) {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>quantity = 0.5;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>} else if (chunk.includes('quarter')) {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>quantity = 0.25;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>} else if (chunk.includes('two')) {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>quantity = 2;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>} else if (chunk.includes('three')) {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>quantity = 3;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p2"><span class="Apple-converted-space">                            </span></p>
<p class="p1"><span class="Apple-converted-space">                            </span>const proteinAmount = food.protein * quantity;</p>
<p class="p2"><span class="Apple-converted-space">                            </span></p>
<p class="p1"><span class="Apple-converted-space">                            </span>results.push({</p>
<p class="p1"><span class="Apple-converted-space">                                </span>food: food.name,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>serving: `${quantity} ${food.servingSize.split(" ")[1] || 'serving'}`,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>protein: proteinAmount,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>originalText: originalChunk</p>
<p class="p1"><span class="Apple-converted-space">                            </span>});</p>
<p class="p2"><span class="Apple-converted-space">                            </span></p>
<p class="p1"><span class="Apple-converted-space">                            </span>totalProtein += proteinAmount;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>chunkInfo.textContent += ` - Found prepared food: ${food.name}, ${quantity} serving(s) = ${proteinAmount}g protein`;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>debug(`Found prepared food: ${food.name}, ${quantity} serving(s) = ${proteinAmount}g protein`);</p>
<p class="p2"><span class="Apple-converted-space">                            </span></p>
<p class="p1"><span class="Apple-converted-space">                            </span>// Mark this chunk as processed</p>
<p class="p1"><span class="Apple-converted-space">                            </span>completeMealMatch = true;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// If we already found a match, skip the detailed analysis</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (completeMealMatch) continue;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// If not a complete meal, proceed with detailed ingredients analysis</p>
<p class="p1"><span class="Apple-converted-space">                </span>// Try to find a quantity</p>
<p class="p1"><span class="Apple-converted-space">                </span>let quantity = 1;</p>
<p class="p1"><span class="Apple-converted-space">                </span>let quantityFound = false;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// First, look for "half", "quarter", etc.</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (chunk.includes('half')) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 0.5;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "half": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "half": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (chunk.includes('quarter')) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 0.25;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "quarter": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "quarter": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (chunk.includes('third')) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 0.33;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "third": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "third": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (chunk.includes('eighth')) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 0.125;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "eighth": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "eighth": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Look for word numbers: "one", "two", etc.</p>
<p class="p1"><span class="Apple-converted-space">                </span>else if (/\bone\b/.test(chunk)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 1;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "one": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "one": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (/\btwo\b/.test(chunk)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 2;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "two": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "two": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (/\bthree\b/.test(chunk)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 3;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "three": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "three": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (/\bfour\b/.test(chunk)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 4;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "four": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "four": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (/\bfive\b/.test(chunk)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantity = 5;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Found "five": quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Found "five": quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Only check for fractions if we haven't found a quantity yet</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!quantityFound) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Check for fractions like 1/2, 1/4, 1/3, etc.</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const fractionRegex = /(\d+)\s*\/\s*(\d+)/;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const fractionMatch = chunk.match(fractionRegex);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (fractionMatch) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const numerator = parseInt(fractionMatch[1]);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const denominator = parseInt(fractionMatch[2]);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (denominator !== 0) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>quantity = numerator / denominator;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>chunkInfo.textContent += ` - Found fraction ${numerator}/${denominator}: quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>debug(`Found fraction ${numerator}/${denominator}: quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Check for numeric values (this should be the last check)</p>
<p class="p1"><span class="Apple-converted-space">                    </span>else {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const numberRegex = /\b(\d+(\.\d+)?)\b/;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const numberMatch = chunk.match(numberRegex);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (numberMatch) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>quantity = parseFloat(numberMatch[1]);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>quantityFound = true;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>chunkInfo.textContent += ` - Found number: quantity = ${quantity}`;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>debug(`Found number: quantity = ${quantity}`);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Try to find a measurement unit</p>
<p class="p1"><span class="Apple-converted-space">                </span>let measureGrams = 0;</p>
<p class="p1"><span class="Apple-converted-space">                </span>let measurementTerm = '';</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>for (const measure of measurementReferences) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>for (const term of measure.terms) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (chunk.includes(term)) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>measureGrams = measure.grams;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>measurementTerm = term;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>chunkInfo.textContent += ` - Found measurement: "${term}" = ${measureGrams}g`;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>debug(`Found measurement: "${term}" = ${measureGrams}g`);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>break;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (measureGrams &gt; 0) break;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// If no measurement found, assume 100g</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (measureGrams === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>measureGrams = 100;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - No measurement found, assuming 100g`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`No measurement found, assuming 100g`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Try to find a food item - search for best match</p>
<p class="p1"><span class="Apple-converted-space">                </span>let bestMatch = null;</p>
<p class="p1"><span class="Apple-converted-space">                </span>let bestMatchScore = 0;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// First check for exact matches or close matches with food names</p>
<p class="p1"><span class="Apple-converted-space">                </span>for (const food of veganFoods) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Skip prepared foods here, we already checked them</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (food.servingSize) continue;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Check for the main food name</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const foodName = food.name.toLowerCase();</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Look for exact match</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (chunk.includes(foodName)) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const score = foodName.length / chunk.length;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (score &gt; bestMatchScore) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>bestMatchScore = score;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>bestMatch = food;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>chunkInfo.textContent += ` - Found food: "${food.name}" (score: ${score.toFixed(2)})`;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>debug(`Found food: "${food.name}" (score: ${score.toFixed(2)})`);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Check synonyms</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (food.synonyms) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>for (const synonym of food.synonyms) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>if (chunk.includes(synonym)) {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>const score = synonym.length / chunk.length;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>if (score &gt; bestMatchScore) {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>bestMatchScore = score;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>bestMatch = food;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>chunkInfo.textContent += ` - Found food synonym: "${synonym}" → "${food.name}" (score: ${score.toFixed(2)})`;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>debug(`Found food synonym: "${synonym}" → "${food.name}" (score: ${score.toFixed(2)})`);</p>
<p class="p1"><span class="Apple-converted-space">                                </span>}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// If we found a food item</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (bestMatch) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Calculate total grams</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const grams = quantity * measureGrams;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Calculate protein in this item</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const proteinAmount = (bestMatch.protein * grams / 100).toFixed(1);</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Create serving description</p>
<p class="p1"><span class="Apple-converted-space">                    </span>let servingDesc = `${quantity} ${measurementTerm || `× ${measureGrams}g`}`;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Add to results</p>
<p class="p1"><span class="Apple-converted-space">                    </span>results.push({</p>
<p class="p1"><span class="Apple-converted-space">                        </span>food: bestMatch.name,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>serving: servingDesc,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>protein: parseFloat(proteinAmount),</p>
<p class="p1"><span class="Apple-converted-space">                        </span>originalText: originalChunk</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>totalProtein += parseFloat(proteinAmount);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - Added ${bestMatch.name}: ${proteinAmount}g protein`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`Added ${bestMatch.name}: ${proteinAmount}g protein`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>chunkInfo.textContent += ` - No food match found`;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debug(`No food match found for "${chunk}"`);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Update globals with results</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentMealItems = results;</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentMealProtein = totalProtein;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Display results</p>
<p class="p1"><span class="Apple-converted-space">            </span>updateAnalysisDisplay();</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if (results.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('No ingredients recognized. Try being more specific or use manual entry.');</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("No ingredients recognized in analysis");</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>debug(`Analysis complete: Found ${results.length} ingredients with total ${totalProtein.toFixed(1)}g protein`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Add a debug toggle button</p>
<p class="p1"><span class="Apple-converted-space">            </span>const analyzedItems = document.getElementById('analyzed-items');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const debugButton = document.createElement('button');</p>
<p class="p1"><span class="Apple-converted-space">            </span>debugButton.textContent = 'Toggle Debug Info';</p>
<p class="p1"><span class="Apple-converted-space">            </span>debugButton.onclick = function() {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const debugInfo = document.getElementById('debug-info');</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (debugInfo) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>debugInfo.style.display = debugInfo.style.display === 'none' ? 'block' : 'none';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>debugButton.style.backgroundColor = '#999';</p>
<p class="p1"><span class="Apple-converted-space">            </span>analyzedItems.appendChild(debugButton);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// If "Just Eaten" is checked, update progress immediately</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (document.getElementById('just-eaten').checked) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>debug("Just eaten is checked, updating progress");</p>
<p class="p1"><span class="Apple-converted-space">                </span>const mealName = document.getElementById('meal-name').value.trim() || 'Analyzed Meal';</p>
<p class="p1"><span class="Apple-converted-space">                </span>const mealDate = getCurrentDate(); // Always use today's date for "just eaten"</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Create a temporary meal object for progress tracking</p>
<p class="p1"><span class="Apple-converted-space">                </span>const tempMeal = {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>protein: totalProtein,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>date: mealDate</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>// Update progress bars with this meal</p>
<p class="p1"><span class="Apple-converted-space">                </span>updateProgressWithMeal(tempMeal);</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast(`Added ${totalProtein.toFixed(1)}g protein to today's total`);</p>
<p class="p1"><span class="Apple-converted-space">            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>showToast('Meal analyzed successfully!');</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
